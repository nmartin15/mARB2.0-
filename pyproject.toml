[tool.black]
line-length = 100
target-version = ['py311']

[tool.ruff]
line-length = 100
target-version = "py311"

[tool.ruff.lint]
select = ["E", "F", "I", "N", "W"]
ignore = ["E501", "N806"]  # N806: Allow uppercase variables (common in ML code: X, X_train, etc.)

[tool.ruff.lint.per-file-ignores]
"tests/**/*.py" = [
    "F841",  # Allow unused variables in tests (often intentional for test setup)
]

[tool.pytest.ini_options]
minversion = "7.0"
testpaths = ["tests"]
python_files = ["test_*.py", "*_test.py"]
python_classes = ["Test*"]
python_functions = ["test_*"]
addopts = [
    "--strict-markers",
    "--strict-config",
    "--verbose",
    "-ra",
    # Exclude slow tests by default for faster test runs
    "-m", "not slow and not performance and not load_test",
]
# Coverage is NOT enabled by default - use explicit coverage commands
# For coverage, run: pytest --cov=app --cov-report=term-missing --cov-report=html
markers = [
    "unit: Unit tests",
    "integration: Integration tests",
    "api: API endpoint tests",
    "slow: Slow running tests",
    "async: Async tests",
    "performance: Performance tests",
    "security: Security and HTTPS tests",
    "load_test: Load tests for large files",
    "auth: Authentication and authorization tests",
    "hipaa: HIPAA compliance tests",
    "audit: Audit logging tests",
    "encryption: Encryption tests",
    "middleware: Middleware tests",
]
asyncio_mode = "auto"
filterwarnings = [
    "error",
    "ignore::DeprecationWarning",
    "ignore::PendingDeprecationWarning",
]
env = [
    "TESTING = true",
    "DATABASE_URL = sqlite:///./test.db",
    "CELERY_BROKER_URL = memory://",
    "CELERY_RESULT_BACKEND = cache+memory://",
]

